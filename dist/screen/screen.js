"use strict";var BLANK_IMG="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",app=angular.module("myApp",[]).constant("URL_BASE","/wgcs").service("apiService",["URL_BASE",function(e){var t=this;this.urlBase=e,this.getGroupDataByStatus=function(){return t.urlBase+"/group/getGroupDataByStatus"},this.pressDownDeviceScreen=function(e,s,n){return t.urlBase+"/device/pressDownDeviceScreen?devices="+e+"&x="+s+"&y="+n},this.pressMoveDeviceScreen=function(e,s,n,i,a){return t.urlBase+"/device/pressMoveDeviceScreen?devices="+e+"&xs="+s+"&ys="+n+"&xe="+i+"&ye="+a},this.pressLeaveDeviceScreen=function(e){return t.urlBase+"/device/pressLeaveDeviceScreen?devices="+e},this.touchDeviceScreen=function(e,s,n,i){return t.urlBase+"/device/touchDeviceScreen?devices="+e+"&touchPort="+s+"&x="+n+"&y="+i},this.slideDeviceScreen=function(e,s,n,i,a,c){return t.urlBase+"/device/slideDeviceScreen?devices="+e+"&touchPort="+s+"&xs="+n+"&ys="+i+"&xe="+a+"&ye="+c},this.showDeviceScreen=function(e){return t.urlBase+"/device/showDeviceScreen?devices="+e},this.returnBack=function(e){return t.urlBase+"/device/returnBack?devices="+e},this.returnHome=function(e){return t.urlBase+"/device/returnHome?devices="+e},this.backHome=function(e){return t.urlBase+"/device/backHome?devices="+e},this.printMsg=function(e,s){return t.urlBase+"/device/printMsg?devices="+e+"&msg="+s},this.clear=function(e){return t.urlBase+"/device/clear?device="+e},this.openScreen=function(){return t.urlBase+"/device/openScreen"},this.open=function(){return t.urlBase+"/device/open"},this.close=function(){return t.urlBase+"/device/close"},this.delMsg=function(e){return t.urlBase+"/device/delMsg?devices="+e},this.pressHome=function(e){return t.urlBase+"/device/pressHome?devices="+e}}]).service("screenService",["$rootScope","$http","apiService",function(e,t,s){var n=this,i=[],a=function(e,n,a,c,r,o){var u=document.getElementById(e),l=u.getContext("2d"),p=void 0,d=void 0,g=void 0,h=void 0,f=[],k=void 0,v=!1;u.addEventListener("mousedown",function(e){e.layerX||0===e.layerX?(p=e.layerX,d=e.layerY):(e.offsetX||0===e.offsetX)&&(p=e.offsetX,d=e.offsetY),f=[];for(var n=0;n<$(".screens-list li input").length;n++)$(".screens-list li input").eq(n).prop("checked")&&f.push($(".screens-list li input").eq(n).attr("mess_id"));f.push(a),k=setTimeout(function(){v=!0,t.get(s.pressDownDeviceScreen(JSON.stringify(f),parseInt(p*(r/228)),parseInt(d*(o/400)))).success(function(){})},1e3)},!1),u.addEventListener("mousemove",function(e){e.layerX||0===e.layerX?(g=e.layerX,h=e.layerY):(e.offsetX||0===e.offsetX)&&(g=e.offsetX,h=e.offsetY),!0===v&&t.get(s.pressMoveDeviceScreen(JSON.stringify(f),parseInt(p*(r/228)),parseInt(d*(o/400)),parseInt(g*(r/228)),parseInt(h*(o/400)))).success(function(){p=g,d=h})}),u.addEventListener("mouseup",function(e){e.layerX||0===e.layerX?(g=e.layerX,h=e.layerY):(e.offsetX||0===e.offsetX)&&(g=e.offsetX,h=e.offsetY),clearTimeout(k),!0===v?(v=!1,t.get(s.pressLeaveDeviceScreen(JSON.stringify(f))).success(function(e){})):Math.abs(g-p)<10&&Math.abs(h-d)<10?t.get(s.touchDeviceScreen(JSON.stringify(f),c,parseInt(p*(r/228)),parseInt(d*(o/400)))).success(function(e){}):t.get(s.slideDeviceScreen(JSON.stringify(f),c,parseInt(p*(r/228)),parseInt(d*(o/400)),parseInt(g*(r/228)),parseInt(h*(o/400)))).success(function(e){})},!1);var m=new WebSocket("ws://"+n);i.push(m);var w,S=navigator.userAgent;w=S.indexOf("Chrome")>-1?"chrome":"firefox";var y,D=window.URL||window.webkitURL,L=new Image;L.src=BLANK_IMG,L.onload=function(){u.width=L.width,u.height=L.height,l.drawImage(L,0,0),"chrome"==w&&D.revokeObjectURL(y)},L.onerror=function(){L.src=BLANK_IMG},m.onmessage=function(e){if("chrome"==w){var t=new Blob([e.data],{type:"image/jpeg"});y=D.createObjectURL(t),t=null,L.src=y}else L.src="data:image/jpg;base64,"+e.data},m.onopen=function(){m.send(w)},m.onclose=function(){},m.onerror=function(){console.log("onerror",arguments)}};this.clearsocket=function(){for(var e=0;e<i.length;e++)i[e].close(),delete i[e];i=[]},this.displayScreen=function(){n.clearsocket();var i=localStorage.getItem("devices")||"";i&&(i=i.split(",")),i.length>0?($(".screen-curtain").hide(),t.get(s.showDeviceScreen(JSON.stringify(i))).success(function(n){if(200==n.code){$(".screens-list").empty();for(var i=0;i<n.data.length;i++){var c='<li class="canvas-li"><h6>同屏展示失败</h6><h2><input class="twoCre" data="'+n.data[i].device+'" type="text" value='+n.data[i].rank+' readonly="true"/></h2><span class="get-write"></span><span class="get-new"></span><div class="write-in-box-tel">\n            <textarea placeholder="&nbsp;&nbsp;&nbsp; 请输入内容..." class="textareaVal"></textarea>\n            <button class="write-in-cancel">取消</button>\n            <button class="write-in-sure" mess_id='+n.data[i].device+'>确认</button>\n        </div><canvas id="canvas'+i+'"></canvas><div class="screens-operation"><span class="get-back"></span><span class="get-search" data="'+n.data[i].device+'"   ng-click="searchtel(x)"><img src="icon/search1.png"></span><span class="get-home"></span> <span class="get-delone"><img src="icon/delone1.png"> </span> <span class="get-check"><input type="checkbox" mess_id="'+n.data[i].device+'"></span></div></li>';$(".screens-list").append(c);var r=n.data[i].device,o=n.data[i].touchStart,u="canvas"+i,l=n.data[i].ip+":8080/wgcs/ws/"+n.data[i].inputStart+"/"+n.data[i].device,p=n.data[i].wmSize.split("x")[0],d=n.data[i].wmSize.split("x")[1];$(".canvas-li").css("margin","0 "+w+"px 5px"),a(u,l,r,o,p,d)}$(".get-write").click(function(){$(this).next().next().css("display","block")}),$(".write-in-cancel").click(function(){$(this).parent().css("display","none")});var g="";$(".write-in-sure").click(function(){for(var e=0,n=[];e<$(".screens-list input").length;e++)$(".screens-list input").eq(e).prop("checked")&&n.push($(".screens-list input").eq(e).attr("mess_id"));(n=[]).push($(this).attr("mess_id")),""==(g=$(this).siblings(".textareaVal").val())?alert("请输入文字!"):t.get(s.printMsg(JSON.stringify(n),g)).success(function(e){e.code}),$(".write-in-sure").siblings(".textareaVal").val("")});var h="";$(".twoCre").click(function(){$(this).removeAttr("readonly"),h=$(this).val()}),$(".twoCre").blur(function(){if($(this).val()==h);else if(""==$(this).val())alert("请填写需要保存的设备编号！");else{var s=$(this).val(),n=$(this).attr("data");t.get("/wgcs/device/getAllDevice?pageNo=1&pageSize=15").success(function(i){t.get("/wgcs/device/editRank?device="+n+"&rank="+s).success(function(s){200==s.code?(alert("保存成功！"),t.get("/wgcs/group/getGroupData").success(function(t){e.groupNames=t.data,e.groupNumbers=t.data.length,e.pageZhe=!0,e.AssGroupNames=[],e.allEquipIds=[],e.equipCounts=0;for(var s=0;s<t.data.length;s++)e.AssGroupNames.push(t.data[s].group.name),e.allEquipIds.push(t.data[s].group.id),e.equipCounts+=t.data[s].count;for(var n=0;n<t.data.length;n++)if(0!=t.data[n].count){e.pageZhe=!1;break}}),t.get("/wgcs/group/getGroupDataByStatus").success(function(t){if(200==t.code){e.onlineGroupNames=t.data,e.moArray=[];for(var s=0;s<t.data[0].deviceVos.length;s++)e.moArray.push(t.data[0].deviceVos[s].device)}}),t.get("/wgcs/device/getAllDevice?pageNo=1&pageSize=15").success(function(t){200==t.code&&(0==t.data.content.length?scope.sweepBox=!0:e.DataList=t.data.content)}),$(this).parent().parent().find("input").addClass("on").attr("readonly","readonly")):setTimeout(function(){alert(s.msg)},1)})})}}),$(".get-check input").click(function(){$(this).prop("checked")?$(this).parent().addClass("on"):$(this).parent().removeClass("on")}),$(".get-back").click(function(){for(var e=0,n=[];e<$(".get-check input").length;e++)$(".get-check input").eq(e).prop("checked")&&n.push($(".get-check input").eq(e).attr("mess_id"));var i=$(this).next().next().next().next().find("input").attr("mess_id");n.push(i),t.get(s.returnBack(JSON.stringify(n))).success(function(){})}),$(".get-search").click(function(){var e=$(this).attr("data");t.get("/wgcs/device/getAllDevice?pageNo=1&pageSize=15").success(function(s){t.get("/wgcs/device/showDifferent?device="+e).success(function(e){200==e.code?alert("添加任务成功"):alert("添加任务失败")})})}),$(".get-delone").click(function(){for(var e=0,n=[];e<$(".get-check input").length;e++)$(".get-check input").eq(e).prop("checked")&&n.push($(".get-check input").eq(e).attr("mess_id"));var i=$(this).next().find("input").attr("mess_id");n.push(i),t.get(s.delMsg(JSON.stringify(n))).success(function(e){e.code})});var f=0,k=void 0;$(".get-home").mousedown(function(){var e=$(this);k=setTimeout(function(){for(var n=0,i=[];n<$(".get-check input").length;n++)$(".get-check input").eq(n).prop("checked")&&i.push($(".get-check input").eq(n).attr("mess_id"));var a=e.next().next().find("input").attr("mess_id");i.push(a),t.get(s.pressHome(JSON.stringify(i))).success(function(e){}),f=1},2e3)}),$(".get-home").mouseup(function(){if($(this).parent().parent().index(),clearTimeout(k),f>=1);else{for(var e=0,n=[];e<$(".get-check input").length;e++)$(".get-check input").eq(e).prop("checked")&&n.push($(".get-check input").eq(e).attr("mess_id"));var i=$(this).next().next().find("input").attr("mess_id");n.push(i),t.get(s.returnHome(JSON.stringify(n))).success(function(){})}f=0});var v=localStorage.getItem("devices");if(0==v.length)e.ShowSomeDevices=0;else if(16==v.length)e.ShowSomeDevices=1;else{var m=v.split(",");e.ShowSomeDevices=m.length}$(".get-new").click(function(){var e=$(this).next().next().next().find("input").attr("mess_id");t.get(s.clear(e)).success(function(){})});var w,S=$(".screens").width();S>=1440?w=(S-1440)/12:S<1440&&S>=1200?w=(S-1200)/10:S<1200&&(w=(S-960)/8),w-=.5,$(".canvas-li").css("margin","0 "+w+"px 5px")}else alert(n.msg)})):($(".screens-list").empty(),$(".screen-curtain").show())},this.groupList=function(){var e=localStorage.getItem("devices")||"";e&&(e=e.split(","));for(var t=0;t<$(".group-list-li li input").length;t++)for(var s=0;s<e.length;s++)$(".group-list-li li input").eq(t).attr("device")==e[s]&&($(".group-list-li li input").eq(t).prop("checked",function(){return!0}),$(".group-list-li li input").eq(t).parent().addClass("on"));for(var n=0;n<$(".group-list-li div input").length;n++){for(var i=$(".group-list-li div").eq(n).next().find("input"),a=0,c=!0;a<i.length;a++)0==i.eq(a).prop("checked")&&(c=!1);c&&($(".group-list-li div input").eq(n).prop("checked",function(){return!0}),$(".group-list-li div input").eq(n).parent().addClass("on"))}}}]).controller("screenCtrl",["$rootScope","$scope","$http","$timeout","$interval","$location","$anchorScroll","apiService","screenService",function(e,t,s,n,i,a,c,r,o){e.rightTaskEatch=1,setInterval(function(){var t=[],n=[],i=[],a=[];s.get(e.link+"/task/getGroupTaskInit?status=-1").success(function(s){if(200==s.code){for(var c=0;c<s.data.length;c++)t=s.data,1==s.data[c].status?n.push(s.data[c]):0==s.data[c].status?i.push(s.data[c]):2==s.data[c].status&&a.push(s.data[c]);1==e.rightTaskEatch?e.taskList=t:2==e.rightTaskEatch?e.taskList=n:3==e.rightTaskEatch?e.taskList=i:4==e.rightTaskEatch&&(e.taskList=a)}})},2e3),s.get(r.getGroupDataByStatus()).success(function(s){t.groupNumber=s.data.length||0,t.groupList=s.data,setTimeout(function(){var t=localStorage.getItem("devices");if(console.log(t),console.log(t.length),null==t)e.ShowSomeDevices=0;else if(16==t.length)e.ShowSomeDevices=1;else{var s=t.split(",");e.ShowSomeDevices=s.length}var n=$(".screen-isCheck");$(".ShowAllDevices").html(n.length);for(var i=0;i<n.length;i++)for(var a=0;a<s.length;a++)if(n[i].attributes[3].value==s[a]){$(".screen-isCheck").eq(i).parent().addClass("on"),$(".screen-isCheck").eq(i).prop("checked",!0);for(var c=$(".screen-isCheck").eq(i).parent().parent().parent().parent().parent().find(".screen-isCheck-span"),r=0;r<c.length;r++)0!=c[r].attributes.length?$(".screen-isCheck").eq(i).parent().parent().parent().parent().parent().find(".screen-isCheck-span-all").addClass("on"):$(".screen-isCheck").eq(i).parent().parent().parent().parent().parent().find(".screen-isCheck-span-all").removeClass("on")}},100)}),e.link="/wgcs",e.changeSize=function(){e.isScreenPage||s.get(e.link+"/task/getGroupTaskInit?status=-1").success(function(t){if(200==t.code)return e.rightTaskEatch=1,e.taskList=t.data,e.viewSize="view-small",e.taskSize="task-big",e.taskButtonHide=!0,e.taskHideButton=!0,e.taskAll=!0,e.taskDoing=!1,e.taskWait=!1,e.taskDown=!1,e.taskList;alert(t.msg)})},e.getHide=function(){e.toshow=!1,e.toshowtwo=!1,e.viewSize="view-big",e.taskSize="task-small",n(function(){e.taskButtonHide=!1,e.taskHideButton=!1,e.newBell=!1},800)},e.newBell=!1,e.isActive=function(e){if(e)return"screen-on"},e.del=!0,e.deltask=function(t){var n="";s.get(e.link+"/task/getGroupTaskInit?status=-1").success(function(i){200==i.code?(e.taskList=i.data,e.del=!0,e.delone=!1,e.deltwo=!1,e.delsree=!1,n=e.taskList[t].id):alert(i.msg),void 0!=n&&s.get(e.link+"/task/delTask?id="+n).success(function(t){200==t.code&&s.get(e.link+"/task/getGroupTaskInit?status=-1").success(function(t){200==t.code&&(e.taskList=t.data,e.taskAll=!0,e.taskDoing=!1,e.taskWait=!1,e.taskDown=!1)})}).error(function(e){})})},e.getTaskAll=function(){e.rightTaskEatch=1,e.del=!0,e.delone=!1,e.deltwo=!1,e.delsree=!1,s.get(e.link+"/task/getGroupTaskInit?status=-1").success(function(t){200==t.code?(e.taskList=t.data,e.taskAll=!0,e.taskDoing=!1,e.taskWait=!1,e.taskDown=!1):alert(t.msg)})},e.deltaskone=function(t){var n="";s.get(e.link+"/task/getGroupTaskInit?status=1").success(function(i){200==i.code?(e.taskList=i.data,n=e.taskList[t].id):alert(i.msg),void 0!=n&&s.get(e.link+"/task/delTask?id="+n).success(function(t){200==t.code&&s.get(e.link+"/task/getGroupTaskInit?status=1").success(function(t){200==t.code?(e.taskList=t.data,e.taskAll=!1,e.taskDoing=!0,e.taskWait=!1,e.taskDown=!1):alert(t.msg)})}).error(function(e){})})},e.getTaskDoing=function(){e.rightTaskEatch=2,e.del=!1,e.delone=!0,e.deltwo=!1,e.delsree=!1,s.get(e.link+"/task/getGroupTaskInit?status=1").success(function(t){200==t.code?(e.taskList=t.data,e.taskAll=!1,e.taskDoing=!0,e.taskWait=!1,e.taskDown=!1):alert(t.msg)})},e.deltasktwo=function(t){var n="";s.get(e.link+"/task/getGroupTaskInit?status=0").success(function(i){200==i.code?(e.taskList=i.data,n=e.taskList[t].id):alert(i.msg),void 0!=n&&s.get(e.link+"/task/delTask?id="+n).success(function(t){200==t.code&&s.get(e.link+"/task/getGroupTaskInit?status=0").success(function(t){200==t.code?(e.taskList=t.data,e.taskAll=!1,e.taskDoing=!1,e.taskWait=!0,e.taskDown=!1,e.waittaskList=e.taskList):alert(t.msg)})}).error(function(e){})})},e.getTaskWait=function(){e.rightTaskEatch=3,e.del=!1,e.delone=!1,e.deltwo=!0,e.delsree=!1,s.get(e.link+"/task/getGroupTaskInit?status=0").success(function(t){200==t.code?(e.taskList=t.data,e.taskAll=!1,e.taskDoing=!1,e.taskWait=!0,e.taskDown=!1,e.waittaskList=e.taskList):alert(t.msg)})},e.deltasksree=function(t){s.get(e.link+"/task/getGroupTaskInit?status=2").success(function(n){if(200==n.code){e.taskList=n.data;var i=e.taskList[t].id}else alert(n.msg);void 0!=i&&s.get(e.link+"/task/delTask?id="+i).success(function(t){200==t.code&&s.get(e.link+"/task/getGroupTaskInit?status=2").success(function(t){200==t.code?(e.taskList=t.data,e.taskAll=!1,e.taskDoing=!1,e.taskWait=!1,e.taskDown=!0):alert(t.msg)})}).error(function(e){})})},e.getTaskDown=function(){e.rightTaskEatch=4,e.del=!1,e.delone=!1,e.deltwo=!1,e.delsree=!0,s.get(e.link+"/task/getGroupTaskInit?status=2").success(function(t){200==t.code?(e.taskList=t.data,e.taskAll=!1,e.taskDoing=!1,e.taskWait=!1,e.taskDown=!0):alert(t.msg)})},e.getStatus=function(e){var t;return 0==e?t="等待执行":1==e?t="正在执行":2==e?t="执行完成":-1==e?t="执行失败":3==e&&(t="任务异常"),t},e.changeColor=function(e){var t;return-1==e?t="page-red":2==e?t="page-green":0==e?t="":1==e?t="page-yellow":3==e&&(t="page-gray"),t},e.getLineHigh=function(e){$(e.target).css("overflow-y","auto")},e.getLineDown=function(e){$(e.target).css("overflow","hidden")},t.showId=0,t.showList=function(e){t.showId=e},t.canShowList=function(e){if(t.showId==e)return"on"},n(o.displayScreen(),0),t.reload=function(){location.reload()},t.checkFlag=!0,t.checkAllDevice=function(){t.checkFlag?($(".get-check").addClass("on").find("input").prop("checked",function(){return!0}),t.checkFlag=!t.checkFlag):($(".get-check").removeClass("on").find("input").prop("checked",function(){return!1}),t.checkFlag=!t.checkFlag)},t.resetPhone=function(){s.get(r.openScreen()).success(function(){})},t.operationList=!1,t.showOperationList=function(){var e=$(".screens-list input");e.length>0&&(t.operationList=!t.operationList,t.operationList&&(t.writeInBox=!1)),console.log(e.length)},t.operationClose=function(){t.operationList=!t.operationList,t.operationList&&(t.writeInBox=!1)},t.openAll=function(e){for(var n=0,i=[];n<$(".screens-list input").length;n++)$(".screens-list input").eq(n).prop("checked")&&i.push($(".screens-list input").eq(n).attr("mess_id"));if(0===i.length)alert("请勾选需要操作的设备!");else{var a=new FormData;a.append("devices",JSON.stringify(i)),a.append("taskId",e),s({method:"POST",url:r.open(),data:a,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?(alert("添加任务成功！"),t.operationList=!1):alert(e.msg)})}},t.closeAll=function(e){for(var n=0,i=[];n<$(".screens-list input").length;n++)$(".screens-list input").eq(n).prop("checked")&&i.push($(".screens-list input").eq(n).attr("mess_id"));if(0===i.length)alert("请勾选需要操作的设备!");else{var a=new FormData;a.append("devices",JSON.stringify(i)),a.append("taskId",e),s({method:"POST",url:r.close(),data:a,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){200==e.code?(alert("添加任务栏成功！"),t.operationList=!1):alert(e.msg)})}},t.backHome=function(){for(var e=0,n=[];e<$(".screens-list input").length;e++)$(".screens-list input").eq(e).prop("checked")&&n.push($(".screens-list input").eq(e).attr("mess_id"));0==n.length?alert("请勾选需要操作的设备！"):s.get(r.backHome(JSON.stringify(n))).success(function(e){200==e.code?(alert("添加任务成功！"),t.operationList=!1):alert(e.msg)})},t.writeInBox1=!1,t.showWriteBox=function(){$(".screens-list input").length>0&&(t.writeInBox1=!0,$(".write-in-box").css("display","block"))},e.isActive1=function(e){if(e)return"init-on-on"},e.changeColor=function(e){var t;return-1==e?t="page-red":2==e?t="page-green":0==e?t="":1==e?t="page-blue":3==e&&(t="page-yellow"),t},t.writeSomething="",t.writeSure=function(){for(var e=0,n=[];e<$(".screens-list input").length;e++)$(".screens-list input").eq(e).prop("checked")&&n.push($(".screens-list input").eq(e).attr("mess_id"));console.log(n),void 0===n.length||0===n.length||null===n?alert("请勾选模型设备！"):""===t.writeSomething||void 0===t.writeSomething?alert("请输入文字!"):s.get(r.printMsg(JSON.stringify(n),t.writeSomething)).success(function(e){200==e.code?t.writeInBox1=!1:alert(e.msg)})},t.writeCancel=function(){t.writeInBox1=!1},t.toTop=function(){a.hash("top-side"),c()}}]).directive("groupCheckOne",["$rootScope","$http","screenService",function(e,t,s){return{link:function(t,n){n.click(function(){var t=!0,i=n.parent().parent().parent().parent().find("input");n.prop("checked")?n.parent().addClass("on"):n.parent().removeClass("on");for(var a=0;a<i.length;a++)0==i.eq(a).prop("checked")&&(t=!1);t?n.parent().parent().parent().parent().prev().find("span").addClass("on").find("input").prop("checked",function(){return!0}):n.parent().parent().parent().parent().prev().find("span").removeClass("on").find("input").prop("checked",function(){return!1});for(var c=0,r=[];c<$(".group-list-li ul input").length;c++)$(".group-list-li ul input").eq(c).prop("checked")&&r.push($(".group-list-li ul input").eq(c).attr("device"));e.ShowSomeDevices=r.length,localStorage.setItem("devices",r),e.socketArr=[],s.displayScreen()})}}}]).directive("groupCheckAll",["$rootScope","$http","screenService",function(e,t,s){return{link:function(t,n){n.click(function(){n.prop("checked")?(n.parent().addClass("on"),n.parent().parent().parent().next().find("span").addClass("on").find("input").prop("checked",function(){return!0})):(n.parent().removeClass("on"),n.parent().parent().parent().next().find("span").removeClass("on").find("input").prop("checked",function(){return!1}));for(var t=0,i=[];t<$(".screen-isCheck").length;t++)$(".screen-isCheck").eq(t).prop("checked")&&i.push($(".screen-isCheck").eq(t).attr("device"));e.ShowSomeDevices=i.length,localStorage.setItem("devices",i),e.socketArr=[],s.displayScreen()})}}}]).directive("screenWatcher",function(){return{link:function(e,t){window.onresize=function(){var e,s=t.width();s>=1440?e=(s-1440)/12:s<1440&&s>=1200?e=(s-1200)/10:s<1200&&(e=(s-960)/8),e-=.5,t.find("li").css("margin","0 "+e-1+"px 5px")}}}});